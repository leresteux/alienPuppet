#include <Servo.h> 
//pin
byte pinDC = 6;
byte pinServo =5;
byte speed_DC;
//servo
byte maxservo = 155;
byte miniservo = 85;
byte pos=110;
int upOrDown;
bool servo_repos=false;
Servo bras;  

//btn
int BtnX = A0;
int BtnY =A1;
int ValX;
int ValY;

void setup() 
{ 
  Serial.begin (9600);
  pinMode(pinDC, OUTPUT);
  bras.attach(pinServo);  // attaches the servo on pin 9 to the servo object 
  delay(10);
  bras.write(pos);
} 


void loop() 

{ 
  //lecture joystick
  ValX = analogRead(BtnX);//bras
  ValY = analogRead(BtnY);//DC
  //code bras
  if (ValX<550 && ValX>450){
    Arm_off();
  }
  else{
    bras.attach(pinServo);
    pos = map(ValX, 0, 1020,miniservo , maxservo);
    bras.write(pos);
    servo_repos=false;
  };
  // code DC
  if (ValY<600){
    speed_DC =0;
  }
  else{
    speed_DC = map(ValY, 600, 1025, 0 , 1025); 
  }
  analogWrite(pinDC, speed_DC);
  delay(10);
} 

void Arm_off(){
  if (pos!=110){
  if (pos>110){
    upOrDown = -1;
  }
  else{
    upOrDown = 1;
  }
  pos = pos +(upOrDown);
  bras.write(pos);
  delay(100);
  } 
  if (pos ==110){
  bras.detach(); }
}
